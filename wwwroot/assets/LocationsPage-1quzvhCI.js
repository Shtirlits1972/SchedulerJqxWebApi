import{_ as le,c as Y,b as R,r as me,o as de,a as ve,d as Te,g as Pe,u as ke,e as O,s as Ie,f as Je,m as X,i as He,k as ae,t as pe,l as fe,w as he,n as we,p as Xe,v as Qe}from"./index-BWPseoO5.js";import{a as Se,j as ze,J as Oe}from"./jqxLocalization-DupiMM9y.js";import"./jqxcolorpicker-CYdRboVm.js";import{J as $e}from"./vue_jqxgrid-oHakgfBu.js";(function(){typeof document>"u"||(function(a){a.jqx.jqxWidget("jqxDropDownButton","",{}),a.extend(a.jqx._jqxDropDownButton.prototype,{defineInstance:function(){var e={disabled:!1,width:null,height:null,arrowSize:17,enableHover:!0,openDelay:250,closeDelay:300,animationType:"default",placeHolder:"",enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",dropDownVerticalAlignment:"bottom",popupZIndex:1500,dropDownContainer:"default",autoOpen:!1,rtl:!1,initContent:null,dropDownWidth:null,dropDownHeight:null,focusable:!0,template:"default",touchMode:!1,hint:!0,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},events:["open","close","opening","closing"]};return this===a.jqx._jqxDropDownButton.prototype||a.extend(!0,this,e),e},createInstance:function(e){var t=this;t.width||(t.width=200),t.height||(t.height=25),t.isanimating=!1;var n=a("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;'><div id='dropDownButtonWrapper' style='outline: none; background-color: transparent; border: none; float: left; width:100%; height: 100%; position: relative;'><div id='dropDownButtonContent' unselectable='on' style='outline: none; background-color: transparent; border: none; float: left; position: relative;'></div><div id='dropDownButtonArrow' unselectable='on'  style='background-color: transparent; border: none; float: right; position: relative;'><div unselectable='on'></div></div></div></div>");if(t.isMaterialized()){var r=window.getComputedStyle(this.element),d=r.getPropertyValue("--jqx-dropdown-animation"),u=r.getPropertyValue("--jqx-action-button-size");u?this.arrowSize=parseInt(u):this.arrowSize=25,d&&this.animationType=="default"&&(this.animationType=d.trim())}t.host.attr("tabindex")?(n.attr("tabindex",t.host.attr("tabindex")),t.host.removeAttr("tabindex")):n.attr("tabindex",0),t.focusable||n.removeAttr("tabIndex"),a.jqx.aria(this),t.popupContent=t.host.children(),t.host.attr("role","button"),t.host.addClass(t.toThemeProperty("jqx-dropdownbutton")),t.popupContent.length==0?(t.popupContent=a("<div>"+t.host.text()+"</div>"),t.popupContent.css("display","block"),t.element.innerHTML=""):t.popupContent.detach();var b=this;t.addHandler(t.host,"loadContent",function(f){b._arrange()});try{var v="dropDownButtonPopup"+t.element.id,x=a(a.find("#"+v));x.length>0&&x.remove(),a.jqx.aria(this,"aria-haspopup",!0),a.jqx.aria(this,"aria-owns",v);var m=a("<div class='dropDownButton' style='overflow: hidden; left: -1000px; top: -1000px; position: absolute;' id='dropDownButtonPopup"+t.element.id+"'></div>");m.addClass(t.toThemeProperty("jqx-widget-content")),m.addClass(t.toThemeProperty("jqx-dropdownbutton-popup")),m.addClass(t.toThemeProperty("jqx-popup")),m.addClass(t.toThemeProperty("jqx-rc-all")),t.dropDownContainer!="element"&&m.css("z-index",t.popupZIndex),m.addClass(t.toThemeProperty("jqx-listbox-container")),a.jqx.browser.msie&&m.addClass(t.toThemeProperty("jqx-noshadow")),t.popupContent.appendTo(m),t.dropDownContainer=="element"?m.appendTo(t.host):m.appendTo(document.body),t.container=m,t.container.css("visibility","hidden")}catch{}t.touch=a.jqx.mobile.isTouchDevice(),t.dropDownButtonStructure=n,t.host.append(n),t.dropDownButtonWrapper=t.host.find("#dropDownButtonWrapper"),t.firstDiv=t.dropDownButtonWrapper.parent(),t.dropDownButtonArrow=t.host.find("#dropDownButtonArrow"),t.arrow=a(t.dropDownButtonArrow.children()[0]),t.dropDownButtonContent=t.host.find("#dropDownButtonContent"),t.dropDownButtonContent.addClass(t.toThemeProperty("jqx-dropdownlist-content")),t.dropDownButtonWrapper.addClass(t.toThemeProperty("jqx-disableselect")),t.rtl&&t.dropDownButtonContent.addClass(t.toThemeProperty("jqx-rtl"));var D=this;t.host.parents()&&t.addHandler(t.host.parents(),"scroll.dropdownbutton"+t.element.id,function(f){var q=D.isOpened();q&&D.close()}),t.addHandler(t.dropDownButtonWrapper,"selectstart",function(){return!1}),t.dropDownButtonWrapper[0].id="dropDownButtonWrapper"+t.element.id,t.dropDownButtonArrow[0].id="dropDownButtonArrow"+t.element.id,t.dropDownButtonContent[0].id="dropDownButtonContent"+t.element.id;var D=this;t.propertyChangeMap.disabled=function(f,q,_,J){J?(f.host.addClass(D.toThemeProperty("jqx-dropdownlist-state-disabled")),f.host.addClass(D.toThemeProperty("jqx-fill-state-disabled")),f.dropDownButtonContent.addClass(D.toThemeProperty("jqx-dropdownlist-content-disabled"))):(f.host.removeClass(D.toThemeProperty("jqx-dropdownlist-state-disabled")),f.host.removeClass(D.toThemeProperty("jqx-fill-state-disabled")),f.dropDownButtonContent.removeClass(D.toThemeProperty("jqx-dropdownlist-content-disabled"))),a.jqx.aria(f,"aria-disabled",f.disabled)},t.disabled&&(t.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-disabled")),t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")),t.dropDownButtonContent.addClass(t.toThemeProperty("jqx-dropdownlist-content-disabled")));var I=t.toThemeProperty("jqx-rc-all")+" "+t.toThemeProperty("jqx-fill-state-normal")+" "+t.toThemeProperty("jqx-widget")+" "+t.toThemeProperty("jqx-widget-content")+" "+t.toThemeProperty("jqx-dropdownlist-state-normal");if(t.host.addClass(I),t.arrow.addClass(t.toThemeProperty("jqx-icon-arrow-down")),t.arrow.addClass(t.toThemeProperty("jqx-icon")),t.template&&t.host.addClass(t.toThemeProperty("jqx-"+t.template)),t._setSize(),t.render(),a.jqx.browser.msie&&a.jqx.browser.version<8&&(t.container.css("display","none"),t.host.parents(".jqx-window").length>0)){var B=t.host.parents(".jqx-window").css("z-index");m.css("z-index",B+10),t.container.css("z-index",B+10)}},setContent:function(e){var t=this;t.dropDownButtonContent.children().remove(),t.dropDownButtonContent[0].innerHTML="",t.dropDownButtonContent.append(e)},val:function(e){var t=this;if(arguments.length==0||typeof e=="object")return t.dropDownButtonContent.text();t.dropDownButtonContent.html(e)},getContent:function(){var e=this;return e.dropDownButtonContent.children().length>0?e.dropDownButtonContent.children():e.dropDownButtonContent.text()},_setSize:function(){var e=this,t=window.getComputedStyle(this.element),n=parseInt(t.borderLeftWidth)*2,r=t.boxSizing;(r==="border-box"||isNaN(n))&&(n=0),this.width!=null&&this.width.toString().indexOf("px")!=-1?this.element.style.width=parseInt(this.width)-n+"px":this.width!=null&&!isNaN(this.width)&&(this.element.style.width=parseInt(this.width)-n+"px"),this.height!=null&&this.height.toString().indexOf("px")!=-1?this.element.style.height=parseInt(this.height)-n+"px":this.height!=null&&!isNaN(this.height)&&(this.element.style.height=parseInt(this.height)-n+"px");var d=!1;e.width!=null&&e.width.toString().indexOf("%")!=-1&&(d=!0,e.host.width(e.width),n>0&&this.host.css("box-sizing","border-box")),e.height!=null&&e.height.toString().indexOf("%")!=-1&&(d=!0,e.host.height(e.height));var u=this;d&&e.refresh(!1),a.jqx.utilities.resize(e.host,function(){u._arrange()})},isOpened:function(){var e=this,t=a.data(document.body,"openedJQXButton"+e.element.id);return t!=null&&t==e.popupContent},focus:function(){var e=this;try{e.host.focus()}catch{}},render:function(){var r=this;r.removeHandlers();var e=this;r.touch||(r.addHandler(r.host,"mouseenter",function(){!e.disabled&&e.enableHover&&(e.host.addClass(e.toThemeProperty("jqx-dropdownlist-state-hover")),e.arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover")),e.host.addClass(e.toThemeProperty("jqx-fill-state-hover")))}),r.addHandler(r.host,"mouseleave",function(){!e.disabled&&e.enableHover&&(e.host.removeClass(e.toThemeProperty("jqx-dropdownlist-state-hover")),e.host.removeClass(e.toThemeProperty("jqx-fill-state-hover")),e.arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-hover")))})),e.autoOpen&&(r.addHandler(r.host,"mouseenter",function(){var d=e.isOpened();!d&&e.autoOpen&&(e.open(),e.host.focus())}),r.addHandler(a(document),"mousemove."+e.element.id,function(d){var u=e.isOpened();if(u&&e.autoOpen){var b=e.host.coord(),v=b.top,x=b.left,m=e.container.coord(),D=m.left,I=m.top,B=!0;d.pageY>=v&&d.pageY<=v+e.host.height()&&d.pageX>=x&&d.pageX<x+e.host.width()&&(B=!1),d.pageY>=I&&d.pageY<=I+e.container.height()&&d.pageX>=D&&d.pageX<D+e.container.width()&&(B=!1),B&&e.close()}})),r.addHandler(r.dropDownButtonWrapper,"mousedown",function(d){if(!e.disabled){var u=e.container.css("visibility")=="visible";if(!e.isanimating){if(u)return e.close(),!1;e.open(),e.focusable||d.preventDefault&&d.preventDefault()}}}),r.touch&&r.addHandler(a(document),a.jqx.mobile.getTouchEventName("touchstart")+"."+r.element.id,e.closeOpenedDropDown,{me:this,popup:r.container,id:r.element.id}),r.addHandler(a(document),"mousedown."+r.element.id,e.closeOpenedDropDown,{me:this,popup:r.container,id:r.element.id}),r.addHandler(r.host,"keydown",function(d){var u=e.container.css("visibility")=="visible";if(e.host.css("display")=="none")return!0;if(d.keyCode=="13"&&(e.isanimating||u&&e.close()),d.keyCode==115)return e.isanimating||(e.isOpened()?e.isOpened()&&e.close():e.open()),!1;d.altKey&&e.host.css("display")=="block"&&(d.keyCode==38?e.isOpened()&&e.close():d.keyCode==40&&(e.isOpened()||e.open())),d.keyCode=="27"&&(e.ishiding||(e.close(),e.tempSelectedIndex!=null&&e.selectIndex(e.tempSelectedIndex)))}),r.addHandler(r.firstDiv,"focus",function(){e.host.addClass(e.toThemeProperty("jqx-dropdownlist-state-focus")),e.host.addClass(e.toThemeProperty("jqx-fill-state-focus")),e.bar&&(e.bar.addClass("focused"),e.label.addClass("focused"))}),r.addHandler(r.firstDiv,"blur",function(){e.host.removeClass(e.toThemeProperty("jqx-dropdownlist-state-focus")),e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")),e.bar&&(e.bar.removeClass("focused"),e.label.removeClass("focused"))});var t=a("<label></label");this.hint&&(t[0].innerHTML=this.placeHolder),t.addClass(e.toThemeProperty("jqx-input-label")),e.dropDownButtonWrapper.append(t),e.label=t;var n=a("<span></span>");e.dropDownButtonWrapper.append(n),n.addClass(e.toThemeProperty("jqx-input-bar")),e.bar=n,e.bar.css("top",this.host.height());var r=this;r.template&&(r.bar.addClass(r.toThemeProperty("jqx-"+r.template)),r.label.addClass(r.toThemeProperty("jqx-"+r.template)))},removeHandlers:function(){var e=this,t=this;e.removeHandler(e.dropDownButtonWrapper,"mousedown"),e.removeHandler(e.host,"keydown"),e.removeHandler(e.firstDiv,"focus"),e.removeHandler(e.firstDiv,"blur"),e.removeHandler(e.host,"mouseenter"),e.removeHandler(e.host,"mouseleave"),e.autoOpen&&(e.removeHandler(e.host,"mouseenter"),e.removeHandler(e.host,"mouseleave")),e.removeHandler(a(document),"mousemove."+t.element.id)},_findPos:function(e){for(;e&&(e.type=="hidden"||e.nodeType!=1||a.expr.filters.hidden(e));)e=e.nextSibling;var t=a(e).coord(!0);return[t.left,t.top]},testOffset:function(e,t,n){var r=this,d=e.outerWidth(),u=e.outerHeight(),b=a(window).width()+a(window).scrollLeft(),v=a(window).height()+a(window).scrollTop();if(t.left+d>b&&d>r.host.width()){var x=r.host.coord().left,m=d-r.host.width();t.left=x-m+2}return t.left<0&&(t.left=parseInt(r.host.coord().left)+"px"),t.top-=Math.min(t.top,t.top+u>v&&v>u?Math.abs(u+n+22):0),t},_getBodyOffset:function(){var e=0,t=0;return a("body").css("border-top-width")!="0px"&&(e=parseInt(a("body").css("border-top-width")),isNaN(e)&&(e=0)),a("body").css("border-left-width")!="0px"&&(t=parseInt(a("body").css("border-left-width")),isNaN(t)&&(t=0)),{left:t,top:e}},open:function(){a.jqx.aria(this,"aria-expanded",!0);var e=this,t=this;if((e.dropDownWidth==null||e.dropDownWidth=="auto")&&e.width!=null&&e.width.indexOf&&e.width.indexOf("%")!=-1){var n=e.host.width();e.container.width(parseInt(n))}t._raiseEvent("2");var r=e.popupContent;a(window).scrollTop(),a(window).scrollLeft();var d=parseInt(e._findPos(e.host[0])[1])+parseInt(e.host.outerHeight())-1+"px",u,b=parseInt(Math.round(e.host.coord(!0).left));u=b+"px",e.ishiding=!1,e.tempSelectedIndex=e.selectedIndex,r.stop(),e.host.addClass(e.toThemeProperty("jqx-dropdownlist-state-selected")),e.host.addClass(e.toThemeProperty("jqx-fill-state-pressed")),e.arrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-selected"));var v=!1;a.jqx.browser.msie&&a.jqx.browser.version<8&&(v=!0),v&&e.container.css("display","block"),e.container.css("left",u),e.container.css("top",d);var x=!1,m=function(){if(e.dropDownHorizontalAlignment=="right"||e.rtl){var _=e.container.width(),J=Math.abs(_-e.host.width());_>e.host.width()?e.container.css("left",parseInt(Math.round(b))-J+"px"):e.container.css("left",parseInt(Math.round(b))+J+"px")}};if(m.call(this),e.dropDownVerticalAlignment=="top"){var D=r.height();x=!0,e.container.height(r.outerHeight()),r.addClass(this.toThemeProperty("jqx-popup-up"));var I=parseInt(e.host.outerHeight()),B=parseInt(d)-Math.abs(D+I);e.interval&&clearInterval(e.interval),e.interval=setInterval(function(){if(r.outerHeight()!=e.container.height()){e.container.height(r.outerHeight());var _=parseInt(d)-Math.abs(r.height()+I);e.container.css("top",_)}},50),r.css("top",23),e.container.css("top",B)}if(e.enableBrowserBoundsDetection){var f=e.testOffset(r,{left:parseInt(e.container.css("left")),top:parseInt(d)},parseInt(e.host.outerHeight()));parseInt(e.container.css("top"))!=f.top?(x=!0,e.container.height(r.outerHeight()),r.css("top",23),e.interval&&clearInterval(e.interval),e.interval=setInterval(function(){if(r.outerHeight()!=t.container.height()){var _=t.testOffset(r,{left:parseInt(e.container.css("left")),top:parseInt(d)},parseInt(e.host.outerHeight()));e.container.css("top",_.top),e.container.height(r.outerHeight())}},50)):r.css("top",0),e.container.css("top",f.top),parseInt(e.container.css("left"))!=f.left&&e.container.css("left",f.left)}if(e.animationType=="none")e.container.css("visibility","visible"),a.data(document.body,"openedJQXButtonParent",t),a.data(document.body,"openedJQXButton"+e.element.id,r),r.css("margin-top",0),r.css("opacity",1),e._raiseEvent("0"),m.call(t);else if(e.animationType==="transform")e.container.css("visibility","visible"),e.container.css("display","block"),a.data(document.body,"openedJQXButtonParent",t),a.data(document.body,"openedJQXButton"+e.element.id,r),r.css("margin-top",0),r.css("opacity",1),e._raiseEvent("0"),m.call(t);else{e.container.css("visibility","visible");var q=r.outerHeight();t.isanimating=!0,e.animationType=="fade"?(r.css("margin-top",0),r.css("opacity",0),r.animate({opacity:1},e.openDelay,function(){a.data(document.body,"openedJQXButtonParent",t),a.data(document.body,"openedJQXButton"+t.element.id,r),t.ishiding=!1,t.isanimating=!1,t._raiseEvent("0")}),m.call(t)):(r.css("opacity",1),x?r.css("margin-top",q):r.css("margin-top",-q),m.call(t),x?r.animate({"margin-top":0},e.openDelay,function(){a.data(document.body,"openedJQXButtonParent",t),a.data(document.body,"openedJQXButton"+t.element.id,r),t.ishiding=!1,t.isanimating=!1,t._raiseEvent("0")}):r.animate({"margin-top":0},e.openDelay,function(){a.data(document.body,"openedJQXButtonParent",t),a.data(document.body,"openedJQXButton"+t.element.id,r),t.ishiding=!1,t.isanimating=!1,t._raiseEvent("0")}))}x?(e.host.addClass(e.toThemeProperty("jqx-rc-t-expanded")),e.container.addClass(e.toThemeProperty("jqx-rc-b-expanded"))):(e.host.addClass(e.toThemeProperty("jqx-rc-b-expanded")),e.container.addClass(e.toThemeProperty("jqx-rc-t-expanded"))),e.focusable&&(e.firstDiv.focus(),setTimeout(function(){t.firstDiv.focus()},10)),e.container.addClass(e.toThemeProperty("jqx-fill-state-focus")),e.host.addClass(t.toThemeProperty("jqx-dropdownlist-state-focus")),e.host.addClass(t.toThemeProperty("jqx-fill-state-focus")),e.container.addClass("jqx-popup-show")},close:function(){a.jqx.aria(this,"aria-expanded",!1);var e=this,t=e.popupContent,n=e.container,r=this;r._raiseEvent("3");var d=!1;if(a.jqx.browser.msie&&a.jqx.browser.version<8&&(d=!0),!!e.isOpened()){if(n.removeClass("jqx-popup-show"),a.data(document.body,"openedJQXButton"+e.element.id,null),e.animationType=="none")e.container.css("visibility","hidden"),d&&e.container.css("display","none"),t.css({opacity:0});else if(e.animationType==="transform")setTimeout(function(){r.isanimating=!1,e.container.css("visibility","hidden"),e.container.css("display","none")},this.closeDelay);else if(!r.ishiding){r.isanimating=!0,t.stop();var u=t.outerHeight();t.css("margin-top",0);var b=-u;parseInt(e.container.coord().top)<parseInt(e.host.coord().top)&&(b=u),e.animationType=="fade"?(t.css({opacity:1}),t.animate({opacity:0},e.closeDelay,function(){n.css("visibility","hidden"),r.isanimating=!1,r.ishiding=!1,d&&n.css("display","none")})):t.animate({"margin-top":b},e.closeDelay,function(){n.css("visibility","hidden"),r.isanimating=!1,r.ishiding=!1,d&&n.css("display","none")})}e.ishiding=!0,e.host.removeClass(e.toThemeProperty("jqx-dropdownlist-state-selected")),e.host.removeClass(e.toThemeProperty("jqx-fill-state-pressed")),e.arrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-selected")),e.host.removeClass(e.toThemeProperty("jqx-rc-b-expanded")),e.container.removeClass(e.toThemeProperty("jqx-rc-t-expanded")),e.host.removeClass(e.toThemeProperty("jqx-rc-t-expanded")),e.container.removeClass(e.toThemeProperty("jqx-rc-b-expanded")),e.container.removeClass(e.toThemeProperty("jqx-fill-state-focus")),e.host.removeClass(e.toThemeProperty("jqx-dropdownlist-state-focus")),e.host.removeClass(e.toThemeProperty("jqx-fill-state-focus")),e._raiseEvent("1")}},closeOpenedDropDown:function(e){var t=e.data.me,n=a(e.target);if(a(e.target).ischildof(e.data.me.host)||a(e.target).ischildof(e.data.me.popupContent))return!0;var r=!1;return a.each(n.parents(),function(){if(this.className!="undefined"&&(this.className.indexOf&&this.className.indexOf("dropDownButton")!=-1||this.className.indexOf&&this.className.indexOf("jqx-popup")!=-1))return r=!0,!1}),r||t.close(),!0},refresh:function(){var e=this;e._arrange()},_arrange:function(){var e=this,t=parseInt(e.host.width()),n=parseInt(e.host.height());e.arrowSize;var r=e.arrowSize,d=3,u=t-r-2*d;if(u>0&&(e.dropDownButtonContent[0].style.width=u+"px"),e.dropDownButtonContent[0].style.height=parseInt(n)+"px",e.dropDownButtonContent[0].style.left="0px",e.dropDownButtonContent[0].style.top="0px",e.dropDownButtonArrow[0].style.width=parseInt(r)+"px",e.dropDownButtonArrow[0].style.height=parseInt(n)+"px",e.rtl&&(e.dropDownButtonArrow.css("float","left"),e.dropDownButtonContent.css("float","right"),e.dropDownButtonContent.css("left",-d)),e.dropDownWidth!=null)if(e.dropDownWidth.toString().indexOf("%")>=0){var t=parseInt(e.dropDownWidth)*e.host.width()/100;e.container.width(t)}else e.container.width(e.dropDownWidth);e.dropDownHeight!=null&&e.container.height(e.dropDownHeight)},destroy:function(){a.jqx.utilities.resize(this.host,null,!0);var e=this;e.interval&&clearInterval(e.interval),e.removeHandler(e.dropDownButtonWrapper,"selectstart"),e.removeHandler(e.dropDownButtonWrapper,"mousedown"),e.removeHandler(e.host,"keydown"),e.host.removeClass(),e.removeHandler(a(document),"mousedown."+e.element.id,e.closeOpenedDropDown),e.host.remove(),e.container.remove()},_raiseEvent:function(e,t){var n=this;t==null&&(t={owner:null}),e==2&&!n.contentInitialized&&n.initContent&&(n.initContent(),n.contentInitialized=!0);var r=n.events[e],d=t;d.owner=this;var u=new a.Event(r);u.owner=this,(e==2||e==3||e==4)&&(u.args=t);var b=n.host.trigger(u);return b},resize:function(e,t){var n=this;n.width=e,n.height=t,n._setSize(),n._arrange()},propertiesChangedHandler:function(e,t,n){n.width&&n.height&&Object.keys(n).length==2&&(e._setSize(),e._arrange(),e.close())},propertyChangedHandler:function(e,t,n,r){var d=this;d.isInitialized==null||d.isInitialized==!1||e.batchUpdate&&e.batchUpdate.width&&e.batchUpdate.height&&Object.keys(e.batchUpdate).length==2||(t==="dropDownVerticalAlignment"&&e.close(),t=="template"&&(e.host.removeClass(e.toThemeProperty("jqx-"+n)),e.host.addClass(e.toThemeProperty("jqx-"+e.template))),t=="rtl"&&(r?(e.dropDownButtonArrow.css("float","left"),e.dropDownButtonContent.css("float","right")):(e.dropDownButtonArrow.css("float","right"),e.dropDownButtonContent.css("float","left"))),t=="autoOpen"&&e.render(),t=="theme"&&r!=null&&a.jqx.utilities.setTheme(n,r,e.host),(t=="width"||t=="height")&&(e._setSize(),e._arrange()))}})})(jqxBaseFramework)})();const Ne={props:{animationType:String,arrowSize:Number,autoOpen:{default:!1,type:Boolean},closeDelay:Number,disabled:{default:!1,type:Boolean},dropDownHorizontalAlignment:String,dropDownVerticalAlignment:String,dropDownWidth:[String,Number],enableBrowserBoundsDetection:{default:!1,type:Boolean},height:[Number,String],initContent:Function,openDelay:Number,popupZIndex:Number,rtl:{default:!1,type:Boolean},template:String,theme:String,width:[Number,String],autoCreate:{default:!0,type:Boolean}},emits:["close","open"],setup(a,e){const t="jqxDropDownButton"+JQXLite.generateID(),n="#"+t;function r(i){a.autoCreate?console.warn('Component is already created! If you want to use createComponent, please set "autoCreate" property to "false".'):oe(i)}function d(i){JQXLite(n).jqxDropDownButton(i)}function u(){const i=Object.keys(Z()),k={};for(let Q=0;Q<i.length;Q++)k[i[Q]]=JQXLite(n).jqxDropDownButton(i[Q]);return k}function b(){JQXLite(n).jqxDropDownButton("close")}function v(){JQXLite(n).jqxDropDownButton("destroy")}function x(){JQXLite(n).jqxDropDownButton("focus")}function m(){return JQXLite(n).jqxDropDownButton("getContent")}function D(){return JQXLite(n).jqxDropDownButton("isOpened")}function I(){JQXLite(n).jqxDropDownButton("open")}function B(i){JQXLite(n).jqxDropDownButton("setContent",i)}function f(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("animationType",i);else return JQXLite(n).jqxDropDownButton("animationType")}function q(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("arrowSize",i);else return JQXLite(n).jqxDropDownButton("arrowSize")}function _(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("autoOpen",i);else return JQXLite(n).jqxDropDownButton("autoOpen")}function J(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("closeDelay",i);else return JQXLite(n).jqxDropDownButton("closeDelay")}function S(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("disabled",i);else return JQXLite(n).jqxDropDownButton("disabled")}function c(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("dropDownHorizontalAlignment",i);else return JQXLite(n).jqxDropDownButton("dropDownHorizontalAlignment")}function L(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("dropDownVerticalAlignment",i);else return JQXLite(n).jqxDropDownButton("dropDownVerticalAlignment")}function H(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("dropDownWidth",i);else return JQXLite(n).jqxDropDownButton("dropDownWidth")}function P(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("enableBrowserBoundsDetection",i);else return JQXLite(n).jqxDropDownButton("enableBrowserBoundsDetection")}function U(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("height",i);else return JQXLite(n).jqxDropDownButton("height")}function K(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("initContent",i);else return JQXLite(n).jqxDropDownButton("initContent")}function ee(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("openDelay",i);else return JQXLite(n).jqxDropDownButton("openDelay")}function W(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("popupZIndex",i);else return JQXLite(n).jqxDropDownButton("popupZIndex")}function $(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("rtl",i);else return JQXLite(n).jqxDropDownButton("rtl")}function V(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("template",i);else return JQXLite(n).jqxDropDownButton("template")}function F(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("theme",i);else return JQXLite(n).jqxDropDownButton("theme")}function te(i){if(i!==void 0)JQXLite(n).jqxDropDownButton("width",i);else return JQXLite(n).jqxDropDownButton("width")}function oe(i){let k;i?k=i:k=Z(),JQXLite(n).jqxDropDownButton(k),se()}function Z(){const i=["animationType","arrowSize","autoOpen","closeDelay","disabled","dropDownHorizontalAlignment","dropDownVerticalAlignment","dropDownWidth","enableBrowserBoundsDetection","height","initContent","openDelay","popupZIndex","rtl","template","theme","width"],k=a;let Q={};for(let E in k)i.indexOf(E)!==-1&&k[E]!==void 0&&(Q[E]=k[E]);return Q}const ie={get animationType(){return f()},set animationType(i){f(i)},get arrowSize(){return q()},set arrowSize(i){q(i)},get autoOpen(){return _()},set autoOpen(i){_(i)},get closeDelay(){return J()},set closeDelay(i){J(i)},get disabled(){return S()},set disabled(i){S(i)},get dropDownHorizontalAlignment(){return c()},set dropDownHorizontalAlignment(i){c(i)},get dropDownVerticalAlignment(){return L()},set dropDownVerticalAlignment(i){L(i)},get dropDownWidth(){return H()},set dropDownWidth(i){H(i)},get enableBrowserBoundsDetection(){return P()},set enableBrowserBoundsDetection(i){P(i)},get height(){return U()},set height(i){U(i)},get initContent(){return K()},set initContent(i){K(i)},get openDelay(){return ee()},set openDelay(i){ee(i)},get popupZIndex(){return W()},set popupZIndex(i){W(i)},get rtl(){return $()},set rtl(i){$(i)},get template(){return V()},set template(i){V(i)},get theme(){return F()},set theme(i){F(i)},get width(){return te()},set width(i){te(i)}};function se(){const i=e;JQXLite(n).on("close",function(k){i.emit("close",k)}),JQXLite(n).on("open",function(k){i.emit("open",k)})}return de(()=>{a.autoCreate&&oe()}),ve(()=>{const i=Z();JQXLite(n).jqxDropDownButton(i)}),{id:t,componentSelector:n,close:b,destroy:v,focus:x,getContent:m,isOpened:D,open:I,setContent:B,setOptions:d,options:ie,getOptions:u,createComponent:r}}},Ae=["id"];function We(a,e,t,n,r,d){return R(),Y("div",{id:n.id},[me(a.$slots,"default")],8,Ae)}const Ee=le(Ne,[["render",We]]),Me={props:{color:String,colorMode:String,disabled:{default:!1,type:Boolean},height:[Number,String],showTransparent:{default:!1,type:Boolean},width:[Number,String],autoCreate:{default:!0,type:Boolean}},emits:["colorchange"],setup(a,e){const t="jqxColorPicker"+JQXLite.generateID(),n="#"+t;function r(c){a.autoCreate?console.warn('Component is already created! If you want to use createComponent, please set "autoCreate" property to "false".'):q(c)}function d(c){JQXLite(n).jqxColorPicker(c)}function u(){const c=Object.keys(_()),L={};for(let H=0;H<c.length;H++)L[c[H]]=JQXLite(n).jqxColorPicker(c[H]);return L}function b(){return JQXLite(n).jqxColorPicker("getColor")}function v(c){JQXLite(n).jqxColorPicker("setColor",c)}function x(c){if(c!==void 0)JQXLite(n).jqxColorPicker("color",c);else return JQXLite(n).jqxColorPicker("color")}function m(c){if(c!==void 0)JQXLite(n).jqxColorPicker("colorMode",c);else return JQXLite(n).jqxColorPicker("colorMode")}function D(c){if(c!==void 0)JQXLite(n).jqxColorPicker("disabled",c);else return JQXLite(n).jqxColorPicker("disabled")}function I(c){if(c!==void 0)JQXLite(n).jqxColorPicker("height",c);else return JQXLite(n).jqxColorPicker("height")}function B(c){if(c!==void 0)JQXLite(n).jqxColorPicker("showTransparent",c);else return JQXLite(n).jqxColorPicker("showTransparent")}function f(c){if(c!==void 0)JQXLite(n).jqxColorPicker("width",c);else return JQXLite(n).jqxColorPicker("width")}function q(c){let L;c?L=c:L=_(),JQXLite(n).jqxColorPicker(L),S()}function _(){const c=["color","colorMode","disabled","height","showTransparent","width"],L=a;let H={};for(let P in L)c.indexOf(P)!==-1&&L[P]!==void 0&&(H[P]=L[P]);return H}const J={get color(){return x()},set color(c){x(c)},get colorMode(){return m()},set colorMode(c){m(c)},get disabled(){return D()},set disabled(c){D(c)},get height(){return I()},set height(c){I(c)},get showTransparent(){return B()},set showTransparent(c){B(c)},get width(){return f()},set width(c){f(c)}};function S(){const c=e;JQXLite(n).on("colorchange",function(L){c.emit("colorchange",L)})}return de(()=>{a.autoCreate&&q()}),ve(()=>{const c=_();JQXLite(n).jqxColorPicker(c)}),{id:t,componentSelector:n,getColor:b,setColor:v,setOptions:d,options:J,getOptions:u,createComponent:r}}},Re=["id"];function Ue(a,e,t,n,r,d){return R(),Y("div",{id:n.id},[me(a.$slots,"default")],8,Re)}const Ve=le(Me,[["render",Ue]]),Fe={class:"page"},Ze={key:0,class:"page__error"},Ge={key:1,class:"page__note"},Ye={class:"modal"},Ke={class:"modal__field"},et=["disabled"],tt={class:"modal__row"},ot={class:"picker"},nt={class:"modal__actions"},rt=["disabled"],it=["disabled"],A="#0078D4",st=Te({__name:"LocationsPage",setup(a){const t=`${Pe().replace(/\/$/,"")}/api/Location`,n=ke(),r=O(null),d=Ie(null),u=O(""),b=O(!1),v=O(null),x=O(!1),m=O(null),D=O(null),I=O(null),B=O(A),f=Je({id:null,nameLocation:"",color:A}),q=n.token,_=s=>{if(typeof s!="object"||s===null)return!1;const o=s;return typeof o.r=="number"&&Number.isFinite(o.r)&&typeof o.g=="number"&&Number.isFinite(o.g)&&typeof o.b=="number"&&Number.isFinite(o.b)},J=s=>Math.max(0,Math.min(255,Math.round(s))),S=(s,o,l)=>`#${J(s).toString(16).padStart(2,"0")}${J(o).toString(16).padStart(2,"0")}${J(l).toString(16).padStart(2,"0")}`.toLowerCase(),c=s=>{if(s==null)return null;if(typeof s=="number"&&Number.isFinite(s))return`#${(s>>>0&16777215).toString(16).padStart(6,"0")}`.toLowerCase();if(typeof s=="string"){const o=s.trim();if(!o)return null;if(/^-?\d+$/.test(o)){const g=Number(o);return Number.isFinite(g)?`#${(g>>>0&16777215).toString(16).padStart(6,"0")}`.toLowerCase():null}const l=o.toLowerCase(),h=l.startsWith("#")?l.slice(1):l,p=h.startsWith("0x")?h.slice(2):h;if(/^[0-9a-f]{3}$/.test(p)){const g=p[0],C=p[1],j=p[2];return!g||!C||!j?null:`#${g}${g}${C}${C}${j}${j}`.toLowerCase()}if(/^[0-9a-f]{6}$/.test(p))return`#${p}`.toLowerCase();if(/^[0-9a-f]{8}$/.test(p))return`#${p.slice(-6)}`.toLowerCase();const w=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*(?:0|1|0?\.\d+))?\s*\)$/.exec(l);if(w){const g=Number(w[1]),C=Number(w[2]),j=Number(w[3]);return[g,C,j].every(T=>Number.isFinite(T))?S(g,C,j):null}const y=/r\s*=\s*(\d{1,3})\s*,\s*g\s*=\s*(\d{1,3})\s*,\s*b\s*=\s*(\d{1,3})/i.exec(o);if(y){const g=Number(y[1]),C=Number(y[2]),j=Number(y[3]);return[g,C,j].every(T=>Number.isFinite(T))?S(g,C,j):null}return null}if(_(s))return S(s.r,s.g,s.b);if(typeof s=="object"&&s!==null){const o=s;if(typeof o.hex=="string"){const l=o.hex.trim().toLowerCase();if(/^#[0-9a-f]{6}$/.test(l))return l;if(/^[0-9a-f]{6}$/.test(l))return`#${l}`.toLowerCase()}if(_(o))return S(o.r,o.g,o.b)}return null},L=s=>{const o=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(s);if(!o)return"#0f172a";const l=o[1],h=o[2],p=o[3];if(!l||!h||!p)return"#0f172a";const w=parseInt(l,16),y=parseInt(h,16),g=parseInt(p,16);return(w*299+y*587+g*114)/1e3>=160?"#0f172a":"#ffffff"},H=s=>s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),P=s=>{const o=c(s);if(!o)return'<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 6px; background: #e2e8f0; color: #0f172a; font-weight: 800; letter-spacing: 0.04em;">НЕ ЗАДАН</div>';const l=L(o),h=o.toUpperCase();return`<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 6px; background: ${o}; color: ${l}; font-weight: 800; letter-spacing: 0.04em;">${H(h)}</div>`},U=async()=>{await we(),D.value?.setContent?.(P(f.color))},K=s=>{const o=c(s.args?.color);if(!o)return;const l=o.toUpperCase();B.value=l,f.color=l,D.value?.setContent?.(P(l))};let ee=0;const W=new WeakMap,$=()=>{const s=globalThis.JQXLite;if(typeof s=="function")return s;const o=globalThis.jqxBaseFramework;return typeof o=="function"?o:null},V=s=>{const o=typeof r.value?.getrowdata=="function"?r.value.getrowdata(s):null;if(typeof o!="object"||o===null)return null;const l=o,h=Number(l.id);if(!Number.isFinite(h))return null;const p=String(l.nameLocation??""),w=c(l.color),y=w?w.toUpperCase():null;return{locationId:h,nameLocation:p,color:y}},F=(s,o)=>{const l=i.localdata.find(h=>h.id===s);l&&(l.color=o),v.value?.id===s&&(v.value={...v.value,color:o})},te=async(s,o,l)=>{if(u.value="",n.dropExpiredToken(),!q.value){u.value="Необходима авторизация для редактирования.";return}const h=V(s.rowIndex);if(!h){u.value="Не удалось определить строку для изменения цвета.";return}const p=s.currentColor,w=$(),y=l.toUpperCase();s.locationId=h.locationId,s.nameLocation=h.nameLocation,s.currentColor=y,s.pendingColor=y,w?.(o).jqxDropDownButton?.("setContent",P(y)),typeof r.value?.setcellvalue=="function"&&r.value.setcellvalue(s.rowIndex,"color",y),F(h.locationId,y),x.value=!0;try{const g=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q.value}`},body:JSON.stringify({id:h.locationId,nameLocation:h.nameLocation,color:y})});if(!g.ok)throw new Error(`${g.status} ${g.statusText}`.trim())}catch(g){console.error("[locations] color update failed",g),u.value=g instanceof Error?`Не удалось сохранить цвет: ${g.message}`:"Не удалось сохранить цвет",s.currentColor=p,s.pendingColor=p,w?.(o).jqxDropDownButton?.("setContent",P(p)),typeof r.value?.setcellvalue=="function"&&r.value.setcellvalue(s.rowIndex,"color",p),F(h.locationId,p)}finally{x.value=!1}},oe=s=>{const o=W.get(s);if(!o)return;const l=$();if(!l)return;o.escCancelled=!1,o.pendingColor=o.currentColor,o.keydownHandler&&window.removeEventListener("keydown",o.keydownHandler,!0),o.keydownHandler=p=>{(p.key==="Escape"||p.keyCode===27)&&(o.escCancelled=!0)},window.addEventListener("keydown",o.keydownHandler,!0);const h=o.currentColor??A;o.ignoreNextColorChange=!0,l(o.pickerHost).jqxColorPicker?.("setColor",h)},Z=s=>{const o=W.get(s);if(!o)return;o.keydownHandler&&(window.removeEventListener("keydown",o.keydownHandler,!0),o.keydownHandler=null);const l=$();if(o.escCancelled){o.pendingColor=o.currentColor;const p=o.currentColor??A;l&&(o.ignoreNextColorChange=!0,l(o.pickerHost).jqxColorPicker?.("setColor",p));return}const h=o.pendingColor;!h||h===o.currentColor||te(o,s,h)},ie=(s,o,l,h)=>{const p=$();if(!p)return;const w=document.createElement("div");w.id=`locations-color-${++ee}`,w.style.width="100%",w.style.height="100%",w.style.boxSizing="border-box";const y=document.createElement("div");y.style.padding="8px";const g=document.createElement("div");y.appendChild(g),w.appendChild(y),h.innerHTML="",h.style.padding="0",h.appendChild(w);const C=c(l),j=C?C.toUpperCase():null,T=j??A,M=p(w),N=p(g);M.jqxDropDownButton?.({width:"100%",height:"100%",dropDownWidth:280,dropDownHeight:260,popupZIndex:2147483647,enableBrowserBoundsDetection:!0}),M.jqxDropDownButton?.("setContent",P(j)),N.jqxColorPicker?.({width:260,height:230,color:T});const re={rowIndex:s,locationId:null,nameLocation:"",currentColor:j,pendingColor:j,ignoreNextColorChange:!1,escCancelled:!1,keydownHandler:null,pickerHost:g};W.set(w,re),N.on?.("colorchange",_e=>{if(re.ignoreNextColorChange){re.ignoreNextColorChange=!1;return}const Le=_e.args,ue=c(Le?.color);ue&&(re.pendingColor=ue.toUpperCase())}),M.on?.("open",()=>oe(w)),M.on?.("close",()=>Z(w))},se=(s,o,l,h)=>{const p=h.firstElementChild;if(!p)return;const w=W.get(p);if(!w)return;w.keydownHandler&&(window.removeEventListener("keydown",w.keydownHandler,!0),w.keydownHandler=null),w.rowIndex=s,w.escCancelled=!1;const y=V(s);w.locationId=y?.locationId??null,w.nameLocation=y?.nameLocation??"";const g=c(l),C=g?g.toUpperCase():null;w.currentColor=C,w.pendingColor=C;const j=$();if(!j)return;j(p).jqxDropDownButton?.("setContent",P(C));const T=C??A;w.ignoreNextColorChange=!0,j(w.pickerHost).jqxColorPicker?.("setColor",T)},i={datatype:"array",datafields:[{name:"id",type:"number"},{name:"nameLocation",type:"string"},{name:"color",type:"string"}],id:"id",localdata:[]},k=[{text:"ID",datafield:"id",width:90,cellsalign:"center",align:"center",editable:!1,filtertype:"number"},{text:"Название",datafield:"nameLocation",editable:!0,filtertype:"input",filtercondition:"starts_with"},{text:"Цвет",datafield:"color",width:120,align:"center",cellsalign:"center",editable:!1,sortable:!1,filterable:!1,createwidget:ie,initwidget:se}],Q=()=>{if(d.value)return d.value;const s=typeof window<"u"?window.jqx:void 0;return s?.dataAdapter?(d.value=new s.dataAdapter(i,{autoBind:!0}),d.value):(u.value="Не удалось инициализировать jqxGrid. Проверьте, что скрипты jqxcore и jqxgrid подключены в main.ts.",null)},E=()=>{r.value&&typeof r.value.updatebounddata=="function"&&r.value.updatebounddata("cells")},G=async()=>{if(u.value="",b.value=!0,v.value=null,ne(),n.dropExpiredToken(),!q.value){u.value="Необходима авторизация для загрузки локаций.",b.value=!1;return}try{const s=await fetch(t,{headers:{Accept:"application/json",Authorization:`Bearer ${q.value}`}});if(!s.ok)throw new Error(`${s.status} ${s.statusText}`.trim());const o=await s.json();i.localdata=Array.isArray(o)?o:[];const l=Q();l&&(typeof l.dataBind=="function"&&l.dataBind(),E())}catch(s){console.error("[locations] load failed",s),u.value=s instanceof Error?`Не удалось загрузить локации: ${s.message}`:"Не удалось загрузить локации"}finally{b.value=!1}};de(()=>{Q(),G(),U()});const z={},ne=()=>{const s=!!v.value;z.edit&&(z.edit.disabled=!s),z.remove&&(z.remove.disabled=!s)},ge=s=>{const o=s?.args&&s.args.row;o&&typeof o.id<"u"?v.value={id:Number(o.id),nameLocation:String(o.nameLocation??""),color:o.color===null||typeof o.color>"u"?null:String(o.color)}:v.value=null,ne()},xe=async()=>{if(!(!v.value||!(!(typeof window<"u")||window.confirm(`Удалить локацию "${v.value.nameLocation}"?`)))){u.value="",b.value=!0;try{const o=await fetch(`${t}/${v.value.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${q.value}`}});if(!o.ok)throw new Error(`${o.status} ${o.statusText}`.trim());v.value=null,ne(),await G()}catch(o){console.error("[locations] remove failed",o),u.value=o instanceof Error?`Не удалось удалить локацию: ${o.message}`:"Не удалось удалить локацию"}finally{b.value=!1}}},ye=async s=>{if(!q.value)return u.value="Необходима авторизация для редактирования.",!1;const o=s?.args??{};if(o.datafield!=="nameLocation")return!0;const l=o.rowindex;if(typeof l!="number"||Number.isNaN(l))return u.value="Не удалось определить строку для редактирования.",!1;const h=String(o.value??"").trim(),p=String(o.oldvalue??"").trim();if(h===p)return!0;const y=(typeof r.value?.getrowid=="function"?r.value.getrowid(l):void 0)??v.value?.id??null;if(y==null)return u.value="Не удалось определить ID строки.",!1;const C=(typeof r.value?.getrowdata=="function"?r.value.getrowdata(l):null)?.color??v.value?.color??null,j=C===null||typeof C>"u"?null:c(C)??(typeof C=="string"?C.trim():null);x.value=!0;try{const T=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q.value}`},body:JSON.stringify({id:y,nameLocation:h,color:j})});if(!T.ok)throw new Error(`${T.status} ${T.statusText}`.trim());return await G(),!0}catch(T){return console.error("[locations] inline edit failed",T),u.value=T instanceof Error?`Не удалось сохранить локацию: ${T.message}`:"Не удалось сохранить локацию",typeof r.value?.setcellvalue=="function"&&r.value.setcellvalue(l,"nameLocation",p),!1}finally{x.value=!1}},Ce=()=>{u.value="",f.id=null,f.nameLocation="",B.value=A,f.color=B.value,U(),typeof m.value?.open=="function"&&m.value.open()},De=()=>{if(!v.value)return;u.value="",f.id=v.value.id,f.nameLocation=v.value.nameLocation;const o=(c(v.value.color)??A).toUpperCase();B.value=o,f.color=o,D.value?.setContent?.(P(o)),typeof m.value?.open=="function"&&m.value.open()},ce=()=>{D.value?.close?.(),typeof m.value?.close=="function"&&m.value.close()},be=()=>{we().then(()=>{D.value?.setContent?.(P(f.color)),I.value?.setColor?.(B.value)})},je=()=>{D.value?.close?.()},qe=async()=>{if(u.value="",!q.value){u.value="Необходима авторизация для добавления локации.";return}const s=f.nameLocation.trim();if(!s){u.value="Название локации обязательно.";return}x.value=!0;try{const o=f.id!==null&&f.id!==void 0,l=typeof f.color=="string"?f.color.trim():"",h=l?c(l)??l:null,p=await fetch(t,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q.value}`},body:JSON.stringify({id:o?f.id:0,nameLocation:s,color:h})});if(!p.ok)throw new Error(`${p.status} ${p.statusText}`.trim());ce(),await G()}catch(o){console.error("[locations] save failed",o),u.value=o instanceof Error?`Не удалось сохранить локацию: ${o.message}`:"Не удалось сохранить локацию"}finally{x.value=!1}},Be=s=>{const o=s?.[0]??s?.element??s;if(!o)return;typeof s?.empty=="function"?s.empty():typeof o=="object"&&"innerHTML"in o&&(o.innerHTML="");const l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.style.gap="8px",l.style.padding="6px 8px",l.style.boxSizing="border-box";const h={height:"32px",width:"140px",padding:"0 10px",borderRadius:"8px",border:"1px solid #e2e8f0",background:"#0f172a",color:"#ffffff",cursor:"pointer",fontWeight:"700",fontSize:"13px"},p=(T,M)=>{const N=document.createElement("button");return N.type="button",N.textContent=T,Object.assign(N.style,h),N.addEventListener("click",M),N},w=p("Добавить",()=>{Ce()}),y=p("Редактировать",()=>{De()}),g=p("Удалить",()=>{xe()}),C=p("Обновить",()=>{G()}),j=p("Сбросить фильтры",()=>{r.value?.clearfilters?.()});z.add=w,z.edit=y,z.remove=g,z.refresh=C,z.reset=j,ne(),l.append(w,y,g,C,j),typeof s?.append=="function"?s.append(l):typeof o?.appendChild=="function"&&o.appendChild(l)};return(s,o)=>(R(),Y("section",Fe,[o[4]||(o[4]=X("p",{class:"page__title"},"Локации",-1)),u.value?(R(),Y("p",Ze,pe(u.value),1)):b.value?(R(),Y("p",Ge,"Загружаем локации…")):(R(),He($e,{key:2,ref_key:"gridRef",ref:r,width:"100%",source:Q(),columns:k,autoheight:!0,sortable:!0,filterable:!0,pageable:!0,pagesizeoptions:["5","10","20","50","100"],pagesize:10,localization:fe(ze),locale:fe(Se),autoshowfiltericon:!1,showtoolbar:!0,toolbarheight:44,rendertoolbar:Be,altrows:!0,selectionmode:"singlerow",columnsresize:!0,enablebrowserselection:!0,editable:!0,editmode:"dblclick",onRowselect:ge,onCellendedit:ye},null,8,["source","localization","locale"])),ae(Oe,{ref_key:"windowRef",ref:m,width:360,height:260,isModal:!0,autoOpen:!1,resizable:!1,onOpen:be,onClose:je},{default:he(()=>[o[3]||(o[3]=X("div",null,"локация",-1)),X("div",Ye,[X("label",Ke,[o[1]||(o[1]=X("span",{class:"modal__label"},"Название",-1)),Xe(X("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>f.nameLocation=l),class:"modal__input",type:"text",placeholder:"Введите название",disabled:x.value,required:""},null,8,et),[[Qe,f.nameLocation]])]),X("div",tt,[o[2]||(o[2]=X("span",{class:"modal__label"},"цвет",-1)),ae(Ee,{ref_key:"dropDownButtonRef",ref:D,width:240,height:44,dropDownWidth:280,dropDownHeight:260,popupZIndex:2147483647,disabled:x.value},{default:he(()=>[X("div",ot,[ae(Ve,{ref_key:"colorPickerRef",ref:I,width:260,height:230,disabled:x.value,onColorchange:K},null,8,["disabled"])])]),_:1},8,["disabled"])]),X("div",nt,[X("button",{class:"modal__button modal__button--ghost",type:"button",onClick:ce,disabled:x.value}," Отмена ",8,rt),X("button",{class:"modal__button",type:"button",onClick:qe,disabled:x.value},pe(x.value?"Сохраняем...":"Сохранить"),9,it)])])]),_:1},512)]))}}),ut=le(st,[["__scopeId","data-v-21568d21"]]);export{ut as default};
